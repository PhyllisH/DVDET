gpu_id=0

# epoch=('last')
# epoch=('20' '40' '60' '80' '90' '100')
epoch=('20' '40' '60' '80' '90' '100' '120' '140' '160' '180' '200' 'best')
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_DeformWarp_K5'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_DeformWarp_Repeat'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_DeformWarp_Bilinear_K5_HWAndNearestResidual'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_DeformWarp_Bilinear_K5'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_DeformWarp_Bilinear_K3'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K5'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K5_HWAndNearestResidual'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K7_HWAndNearestResidual'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K7_HWAndNearestResidual_Repeat'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Nearest_SaliencySampler'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySampler'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_HWAndNearestResidual_SaliencySampler'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_HWAndNearestResidual_SaliencySampler_InputWithIndex'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySampler_InputWithIndex'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySampler_InputWithIndex_GridDown4'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySampler_InputWithIndex_GridDown2'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySampler_InputWithIndex_GridDown1'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySamplerUAV_InputWithIndex_GridDown4_Pad10GaussianR10'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySamplerUAV_InputWithIndex_GridDown4_Pad20GaussianR10'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySamplerUAV_InputWithIndex_GridDown4_Pad30GaussianR13'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliecySampler_InputWithIndex_GridDown4_Pad20GaussianR10'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySampler_InputWithIndex_GridDown4_Pad20GaussianR5'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_Bilinear_SaliencySampler_InputWithIndex_GridDown4_Pad10GaussianR5'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_HardWarp_Trans05'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_HardWarp_Trans10'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_HardWarp_Trans15'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WeightedDepth'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WeightedDepth_repeat'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WeightedDepth_repeat2'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_SaliencySampler_InputWithIndex_WeightedDepth'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K5_HWAndNearestResidual_WeightedDepth'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WeightedDepth_Revised'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K5_HWAndNearestResidual_WeightedDepth_Revised'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_SaliencySampler_InputWithIndex_WeightedDepth_Revised'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K5_HWAndNearestResidual_WeightedDepth_Revised_AvgThenCFDCN'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_CFDCN_Bilinear_K5_HWAndNearestResidual_NormalizedHW_WeightedDepth_AvgThenCFDCN'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WarpImage'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WeightedDepth_DepthGapFromTrainSet_Repeat'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WeightedDepth_DepthGapFromTrainSet_DepthWithSupervision_MeanZ'
# exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WeightedDepth_DepthGapFromTrainSet_DepthWithSupervision_MaxZ'
exp_id='dla_multiagent_withwarp_GlobalCoord_GTFeatMap_352_192_BEVGT_40m_Town5_Baseline_NOMESSAGE_MapScale1_msra02_WarpImage_Depth05'

for i in ${epoch[*]}
do
    echo $i
    CUDA_VISIBLE_DEVICES=$gpu_id python multiagent_test.py multiagent_det \
        --exp_id $exp_id \
        --load_model '../exp/multiagent_det/'$exp_id'/model_'$i'.pth' \
        --gpus $gpu_id --coord=Global  --trans_layer -1 --down_ratio=1 \
        --message_mode=NO_MESSAGE --uav_height=40 \
        --input_dir '/GPFS/data/yhu/Dataset/airsim_camera/airsim_camera_seg_15' \
        --map_scale=1.0 \
        # --warp_mode=HW --depth_mode=Weighted
done
